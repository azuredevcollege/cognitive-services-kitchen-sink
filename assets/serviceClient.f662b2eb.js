import{v as Be}from"./v4.90f1a8cc.js";class vr{constructor(e){if(!e)throw new Error("key must be a non-empty string");this._key=e}get key(){return this._key}update(e){this._key=e}}function xr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ae(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(t){return this instanceof k?(this.v=t,this):new k(t)}function Sr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(y){return new Promise(function(m,h){s.push([f,y,m,h])>1||a(f,y)})})}function a(f,y){try{c(r[f](y))}catch(m){d(s[0][3],m)}}function c(f){f.value instanceof k?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,y){f(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Rr(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:k(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Cr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ae=="function"?ae(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}const le=new Set(["Deserialize","Serialize","Retry","Sign"]);class q{constructor(e){var n;this._policies=[],this._policies=(n=e==null?void 0:e.slice(0))!==null&&n!==void 0?n:[],this._orderedPolicies=void 0}addPolicy(e,n={}){if(n.phase&&n.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(n.phase&&!le.has(n.phase))throw new Error(`Invalid phase name: ${n.phase}`);if(n.afterPhase&&!le.has(n.afterPhase))throw new Error(`Invalid afterPhase name: ${n.afterPhase}`);this._policies.push({policy:e,options:n}),this._orderedPolicies=void 0}removePolicy(e){const n=[];return this._policies=this._policies.filter(r=>e.name&&r.policy.name===e.name||e.phase&&r.options.phase===e.phase?(n.push(r.policy),!1):!0),this._orderedPolicies=void 0,n}sendRequest(e,n){return this.getOrderedPolicies().reduceRight((s,o)=>a=>o.sendRequest(a,s),s=>e.sendRequest(s))(n)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new q(this._policies)}static create(){return new q}orderPolicies(){const e=[],n=new Map;function r(m){return{name:m,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const i=r("Serialize"),s=r("None"),o=r("Deserialize"),a=r("Retry"),c=r("Sign"),l=[i,s,o,a,c];function u(m){return m==="Retry"?a:m==="Serialize"?i:m==="Deserialize"?o:m==="Sign"?c:s}for(const m of this._policies){const h=m.policy,p=m.options,b=h.name;if(n.has(b))throw new Error("Duplicate policy names not allowed in pipeline");const g={policy:h,dependsOn:new Set,dependants:new Set};p.afterPhase&&(g.afterPhase=u(p.afterPhase),g.afterPhase.hasAfterPolicies=!0),n.set(b,g),u(p.phase).policies.add(g)}for(const m of this._policies){const{policy:h,options:p}=m,b=h.name,g=n.get(b);if(!g)throw new Error(`Missing node for policy ${b}`);if(p.afterPolicies)for(const w of p.afterPolicies){const P=n.get(w);P&&(g.dependsOn.add(P),P.dependants.add(g))}if(p.beforePolicies)for(const w of p.beforePolicies){const P=n.get(w);P&&(P.dependsOn.add(g),g.dependants.add(P))}}function d(m){m.hasRun=!0;for(const h of m.policies)if(!(h.afterPhase&&(!h.afterPhase.hasRun||h.afterPhase.policies.size))&&h.dependsOn.size===0){e.push(h.policy);for(const p of h.dependants)p.dependsOn.delete(h);n.delete(h.policy.name),m.policies.delete(h)}}function f(){for(const m of l){if(d(m),m.policies.size>0&&m!==s){s.hasRun||d(s);return}m.hasAfterPolicies&&d(s)}}let y=0;for(;n.size>0;){y++;const m=e.length;if(f(),e.length<=m&&y>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}function Fe(){return q.create()}function Ke(...t){if(t.length>0){const e=String(t[0]);e.includes(":error")?console.error(...t):e.includes(":warning")?console.warn(...t):e.includes(":info")?console.info(...t):e.includes(":verbose")?console.debug(...t):console.debug(...t)}}const ce=typeof process!="undefined"&&process.env&&{}.DEBUG||void 0;let Pe,X=[],J=[];const V=[];ce&&te(ce);const ve=Object.assign(t=>xe(t),{enable:te,enabled:ne,disable:We,log:Ke});function te(t){Pe=t,X=[],J=[];const e=/\*/g,n=t.split(",").map(r=>r.trim().replace(e,".*?"));for(const r of n)r.startsWith("-")?J.push(new RegExp(`^${r.substr(1)}$`)):X.push(new RegExp(`^${r}$`));for(const r of V)r.enabled=ne(r.namespace)}function ne(t){if(t.endsWith("*"))return!0;for(const e of J)if(e.test(t))return!1;for(const e of X)if(e.test(t))return!0;return!1}function We(){const t=Pe||"";return te(""),t}function xe(t){const e=Object.assign(n,{enabled:ne(t),destroy:je,log:ve.log,namespace:t,extend:Xe});function n(...r){!e.enabled||(r.length>0&&(r[0]=`${t} ${r[0]}`),e.log(...r))}return V.push(e),e}function je(){const t=V.indexOf(this);return t>=0?(V.splice(t,1),!0):!1}function Xe(t){const e=xe(`${this.namespace}:${t}`);return e.log=this.log,e}var D=ve;const Se=new Set,z=typeof process!="undefined"&&process.env&&{}.AZURE_LOG_LEVEL||void 0;let G;const Q=D("azure");Q.log=(...t)=>{D.log(...t)};const re=["verbose","info","warning","error"];z&&(Ee(z)?Je(z):console.error(`AZURE_LOG_LEVEL set to unknown log level '${z}'; logging is not enabled. Acceptable values: ${re.join(", ")}.`));function Je(t){if(t&&!Ee(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${re.join(",")}`);G=t;const e=[];for(const n of Se)Ce(n)&&e.push(n.namespace);D.enable(e.join(","))}const ue={verbose:400,info:300,warning:200,error:100};function ie(t){const e=Q.extend(t);return Re(Q,e),{error:I(e,"error"),warning:I(e,"warning"),info:I(e,"info"),verbose:I(e,"verbose")}}function Re(t,e){e.log=(...n)=>{t.log(...n)}}function I(t,e){const n=Object.assign(t.extend(e),{level:e});if(Re(t,n),Ce(n)){const r=D.disable();D.enable(r+","+n.namespace)}return Se.add(n),n}function Ce(t){return!!(G&&ue[t.level]<=ue[G])}function Ee(t){return re.includes(t)}const O=ie("core-rest-pipeline"),de=!1;class se extends Error{constructor(e){super(e),this.name="AbortError"}}function Ge(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function Ae(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}function oe(t){if(Ae(t)){const e=typeof t.name=="string",n=typeof t.message=="string";return e&&n}return!1}function F(t){if(oe(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}const K="REDACTED",Qe=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],Ye=["api-version"];class Oe{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:n=[]}={}){e=Qe.concat(e),n=Ye.concat(n),this.allowedHeaderNames=new Set(e.map(r=>r.toLowerCase())),this.allowedQueryParameters=new Set(n.map(r=>r.toLowerCase()))}sanitize(e){const n=new Set;return JSON.stringify(e,(r,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(r==="headers")return this.sanitizeHeaders(i);if(r==="url")return this.sanitizeUrl(i);if(r==="query")return this.sanitizeQuery(i);if(r==="body")return;if(r==="response")return;if(r==="operationSpec")return;if(Array.isArray(i)||Ae(i)){if(n.has(i))return"[Circular]";n.add(i)}return i},2)}sanitizeHeaders(e){const n={};for(const r of Object.keys(e))this.allowedHeaderNames.has(r.toLowerCase())?n[r]=e[r]:n[r]=K;return n}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;const n={};for(const r of Object.keys(e))this.allowedQueryParameters.has(r.toLowerCase())?n[r]=e[r]:n[r]=K;return n}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;const n=new URL(e);if(!n.search)return e;for(const[r]of n.searchParams)this.allowedQueryParameters.has(r.toLowerCase())||n.searchParams.set(r,K);return n.toString()}}const Ze="logPolicy";function et(t={}){var e;const n=(e=t.logger)!==null&&e!==void 0?e:O.info,r=new Oe({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Ze,async sendRequest(i,s){if(!n.enabled)return s(i);n(`Request: ${r.sanitize(i)}`);const o=await s(i);return n(`Response status code: ${o.status}`),n(`Headers: ${r.sanitize(o.headers)}`),o}}}const tt="redirectPolicy",fe=["GET","HEAD"];function nt(t={}){const{maxRetries:e=20}=t;return{name:tt,async sendRequest(n,r){const i=await r(n);return Te(r,i,e)}}}async function Te(t,e,n,r=0){const{request:i,status:s,headers:o}=e,a=o.get("location");if(a&&(s===300||s===301&&fe.includes(i.method)||s===302&&fe.includes(i.method)||s===303&&i.method==="POST"||s===307)&&r<n){const c=new URL(a,i.url);i.url=c.toString(),s===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");const l=await t(i);return Te(t,l,n,r+1)}return e}function rt(){return"x-ms-useragent"}function it(t){const e=self.navigator;t.set("OS",(e.oscpu||e.platform).replace(" ",""))}const $e="1.10.0",Y=3;function st(t){const e=[];for(const[n,r]of t){const i=r?`${n}/${r}`:n;e.push(i)}return e.join(" ")}function ot(){return rt()}function Ne(t){const e=new Map;e.set("core-rest-pipeline",$e),it(e);const n=st(e);return t?`${t} ${n}`:n}const me=ot(),at="userAgentPolicy";function lt(t={}){const e=Ne(t.userAgentPrefix);return{name:at,async sendRequest(n,r){return n.headers.has(me)||n.headers.set(me,e),r(n)}}}const ct=new Error("decompressResponsePolicy is not supported in browser environment");function ut(){throw ct}const dt="The operation was aborted.";function De(t,e,n){return new Promise((r,i)=>{let s,o;const a=()=>i(new se(n!=null&&n.abortErrorMsg?n==null?void 0:n.abortErrorMsg:dt)),c=()=>{(n==null?void 0:n.abortSignal)&&o&&n.abortSignal.removeEventListener("abort",o)};if(o=()=>(s&&clearTimeout(s),c(),a()),(n==null?void 0:n.abortSignal)&&n.abortSignal.aborted)return a();s=setTimeout(()=>{c(),r(e)},t),n!=null&&n.abortSignal&&n.abortSignal.addEventListener("abort",o)})}function ft(t,e){const n=t.headers.get(e);if(!n)return;const r=Number(n);if(!Number.isNaN(r))return r}const Z="Retry-After",mt=["retry-after-ms","x-ms-retry-after-ms",Z];function Me(t){if(!!(t&&[429,503].includes(t.status)))try{for(const i of mt){const s=ft(t,i);if(s===0||s)return s*(i===Z?1e3:1)}const e=t.headers.get(Z);if(!e)return;const r=Date.parse(e)-Date.now();return Number.isFinite(r)?Math.max(0,r):void 0}catch{return}}function ht(t){return Number.isFinite(Me(t))}function yt(){return{name:"throttlingRetryStrategy",retry({response:t}){const e=Me(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}const pt=1e3,gt=1e3*64;function wt(t={}){var e,n;const r=(e=t.retryDelayInMs)!==null&&e!==void 0?e:pt,i=(n=t.maxRetryDelayInMs)!==null&&n!==void 0?n:gt;let s=r;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){const l=Pt(c),u=l&&t.ignoreSystemErrors,d=bt(a),f=d&&t.ignoreHttpStatusCodes;if(a&&(ht(a)||!d)||f||u)return{skipStrategy:!0};if(c&&!l&&!d)return{errorToThrow:c};const m=s*Math.pow(2,o),h=Math.min(i,m);return s=h/2+Ge(0,h/2),{retryAfterInMs:s}}}}function bt(t){return Boolean(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function Pt(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT":!1}const he=ie("core-rest-pipeline retryPolicy"),vt="retryPolicy";function xt(t,e={maxRetries:Y}){const n=e.logger||he;return{name:vt,async sendRequest(r,i){var s,o;let a,c,l=-1;e:for(;;){l+=1,a=void 0,c=void 0;try{n.info(`Retry ${l}: Attempting to send request`,r.requestId),a=await i(r),n.info(`Retry ${l}: Received a response from request`,r.requestId)}catch(u){if(n.error(`Retry ${l}: Received an error from request`,r.requestId),c=u,!u||c.name!=="RestError")throw u;a=c.response}if(!((s=r.abortSignal)===null||s===void 0)&&s.aborted)throw n.error(`Retry ${l}: Request aborted.`),new se;if(l>=((o=e.maxRetries)!==null&&o!==void 0?o:Y)){if(n.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}n.info(`Retry ${l}: Processing ${t.length} retry strategies.`);t:for(const u of t){const d=u.logger||he;d.info(`Retry ${l}: Processing retry strategy ${u.name}.`);const f=u.retry({retryCount:l,response:a,responseError:c});if(f.skipStrategy){d.info(`Retry ${l}: Skipped.`);continue t}const{errorToThrow:y,retryAfterInMs:m,redirectTo:h}=f;if(y)throw d.error(`Retry ${l}: Retry strategy ${u.name} throws error:`,y),y;if(m||m===0){d.info(`Retry ${l}: Retry strategy ${u.name} retries after ${m}`),await De(m,void 0,{abortSignal:r.abortSignal});continue e}if(h){d.info(`Retry ${l}: Retry strategy ${u.name} redirects to ${h}`),r.url=h;continue e}}if(c)throw n.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return n.info("None of the retry strategies could work with the received response. Returning it."),a}}}}const St="defaultRetryPolicy";function Rt(t={}){var e;return{name:St,sendRequest:xt([yt(),wt(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:Y}).sendRequest}}const Ct="formDataPolicy";function Et(){return{name:Ct,async sendRequest(t,e){if(t.formData){const n=t.formData,r=new FormData;for(const s of Object.keys(n)){const o=n[s];if(Array.isArray(o))for(const a of o)r.append(s,a);else r.append(s,o)}t.body=r,t.formData=void 0;const i=t.headers.get("Content-Type");i&&i.indexOf("application/x-www-form-urlencoded")!==-1?t.body=new URLSearchParams(r).toString():i&&i.indexOf("multipart/form-data")!==-1&&t.headers.delete("Content-Type")}return e(t)}}}const At=new Error("proxyPolicy is not supported in browser environment");function Ot(){throw At}const Tt="setClientRequestIdPolicy";function $t(t="x-ms-client-request-id"){return{name:Tt,async sendRequest(e,n){return e.headers.has(t)||e.headers.set(t,e.requestId),n(e)}}}const Nt="tlsPolicy";function Dt(t){return{name:Nt,sendRequest:async(e,n)=>(e.tlsSettings||(e.tlsSettings=t),n(e))}}const $={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function Mt(t={}){let e=new N(t.parentContext);return t.span&&(e=e.setValue($.span,t.span)),t.namespace&&(e=e.setValue($.namespace,t.namespace)),e}class N{constructor(e){this._contextMap=e instanceof N?new Map(e._contextMap):new Map}setValue(e,n){const r=new N(this);return r._contextMap.set(e,n),r}getValue(e){return this._contextMap.get(e)}deleteValue(e){const n=new N(this);return n._contextMap.delete(e),n}}function _t(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function zt(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:_t(),tracingContext:Mt({parentContext:e.tracingContext})}),withContext(t,e,...n){return e(...n)}}}let W;function U(){return W||(W=zt()),W}function It(t){const{namespace:e,packageName:n,packageVersion:r}=t;function i(l,u,d){var f;const y=U().startSpan(l,Object.assign(Object.assign({},d),{packageName:n,packageVersion:r,tracingContext:(f=u==null?void 0:u.tracingOptions)===null||f===void 0?void 0:f.tracingContext}));let m=y.tracingContext;const h=y.span;m.getValue($.namespace)||(m=m.setValue($.namespace,e)),h.setAttribute("az.namespace",m.getValue($.namespace));const p=Object.assign({},u,{tracingOptions:Object.assign(Object.assign({},u==null?void 0:u.tracingOptions),{tracingContext:m})});return{span:h,updatedOptions:p}}async function s(l,u,d,f){const{span:y,updatedOptions:m}=i(l,u,f);try{const h=await o(m.tracingOptions.tracingContext,()=>Promise.resolve(d(m,y)));return y.setStatus({status:"success"}),h}catch(h){throw y.setStatus({status:"error",error:h}),h}finally{y.end()}}function o(l,u,...d){return U().withContext(l,u,...d)}function a(l){return U().parseTraceparentHeader(l)}function c(l){return U().createRequestHeaders(l)}return{startSpan:i,withSpan:s,withContext:o,parseTraceparentHeader:a,createRequestHeaders:c}}const Ut={},Lt=new Oe;class x extends Error{constructor(e,n={}){super(e),this.name="RestError",this.code=n.code,this.statusCode=n.statusCode,this.request=n.request,this.response=n.response,Object.setPrototypeOf(this,x.prototype)}[Ut](){return`RestError: ${this.message} 
 ${Lt.sanitize(this)}`}}x.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";x.PARSE_ERROR="PARSE_ERROR";function kt(t){return t instanceof x?!0:oe(t)&&t.name==="RestError"}const qt="tracingPolicy";function Vt(t={}){const e=Ne(t.userAgentPrefix),n=Ht();return{name:qt,async sendRequest(r,i){var s,o;if(!n||!(!((s=r.tracingOptions)===null||s===void 0)&&s.tracingContext))return i(r);const{span:a,tracingContext:c}=(o=Bt(n,r,e))!==null&&o!==void 0?o:{};if(!a||!c)return i(r);try{const l=await n.withContext(c,i,r);return Kt(a,l),l}catch(l){throw Ft(a,l),l}}}}function Ht(){try{return It({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:$e})}catch(t){O.warning(`Error when creating the TracingClient: ${F(t)}`);return}}function Bt(t,e,n){try{const{span:r,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":e.method,"http.url":e.url,requestId:e.requestId}});if(!r.isRecording()){r.end();return}n&&r.setAttribute("http.user_agent",n);const s=t.createRequestHeaders(i.tracingOptions.tracingContext);for(const[o,a]of Object.entries(s))e.headers.set(o,a);return{span:r,tracingContext:i.tracingOptions.tracingContext}}catch(r){O.warning(`Skipping creating a tracing span due to an error: ${F(r)}`);return}}function Ft(t,e){try{t.setStatus({status:"error",error:oe(e)?e:void 0}),kt(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(n){O.warning(`Skipping tracing span processing due to an error: ${F(n)}`)}}function Kt(t,e){try{t.setAttribute("http.status_code",e.status);const n=e.headers.get("x-ms-request-id");n&&t.setAttribute("serviceRequestId",n),t.setStatus({status:"success"}),t.end()}catch(n){O.warning(`Skipping tracing span processing due to an error: ${F(n)}`)}}function Wt(t){const e=Fe();return de&&(t.tlsOptions&&e.addPolicy(Dt(t.tlsOptions)),e.addPolicy(Ot(t.proxyOptions)),e.addPolicy(ut())),e.addPolicy(Et()),e.addPolicy(lt(t.userAgentOptions)),e.addPolicy($t()),e.addPolicy(Rt(t.retryOptions),{phase:"Retry"}),e.addPolicy(Vt(t.userAgentOptions),{afterPhase:"Retry"}),de&&e.addPolicy(nt(t.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(et(t.loggingOptions),{afterPhase:"Sign"}),e}function L(t){return t.toLowerCase()}function*jt(t){for(const e of t.values())yield[e.name,e.value]}class Xt{constructor(e){if(this._headersMap=new Map,e)for(const n of Object.keys(e))this.set(n,e[n])}set(e,n){this._headersMap.set(L(e),{name:e,value:String(n)})}get(e){var n;return(n=this._headersMap.get(L(e)))===null||n===void 0?void 0:n.value}has(e){return this._headersMap.has(L(e))}delete(e){this._headersMap.delete(L(e))}toJSON(e={}){const n={};if(e.preserveCase)for(const r of this._headersMap.values())n[r.name]=r.value;else for(const[r,i]of this._headersMap)n[r]=i.value;return n}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return jt(this._headersMap)}}function _e(t){return new Xt(t)}function Jt(t){return t&&typeof t.pipe=="function"}function ze(t){return Boolean(t&&typeof t.getReader=="function"&&typeof t.tee=="function")}class Gt{async sendRequest(e){if(new URL(e.url).protocol!=="https:"&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await Qt(e)}catch(i){throw en(i,e)}}}async function Qt(t){const{abortController:e,abortControllerCleanup:n}=Zt(t);try{const r=tn(t.headers),i=rn(t),s=await fetch(t.url,{body:i,method:t.method,headers:r,signal:e.signal,credentials:t.withCredentials?"include":"same-origin",cache:"no-store"});return Yt(s,t)}finally{n&&n()}}async function Yt(t,e){var n,r;const i=nn(t),s={request:e,headers:i,status:t.status},o=ze(t.body)?Ie(t.body,e.onDownloadProgress):t.body;if(((n=e.streamResponseStatusCodes)===null||n===void 0?void 0:n.has(Number.POSITIVE_INFINITY))||((r=e.streamResponseStatusCodes)===null||r===void 0?void 0:r.has(s.status)))if(e.enableBrowserStreams)s.browserStreamBody=o!=null?o:void 0;else{const a=new Response(o);s.blobBody=a.blob()}else{const a=new Response(o);s.bodyAsText=await a.text()}return s}function Zt(t){const e=new AbortController;let n,r;if(t.abortSignal){if(t.abortSignal.aborted)throw new se("The operation was aborted.");r=i=>{i.type==="abort"&&e.abort()},t.abortSignal.addEventListener("abort",r),n=()=>{var i;r&&((i=t.abortSignal)===null||i===void 0||i.removeEventListener("abort",r))}}return t.timeout>0&&setTimeout(()=>{e.abort()},t.timeout),{abortController:e,abortControllerCleanup:n}}function en(t,e){var n;return t&&(t==null?void 0:t.name)==="AbortError"?t:new x(`Error sending request: ${t.message}`,{code:(n=t==null?void 0:t.code)!==null&&n!==void 0?n:x.REQUEST_SEND_ERROR,request:e})}function tn(t){const e=new Headers;for(const[n,r]of t)e.append(n,r);return e}function nn(t){const e=_e();for(const[n,r]of t.headers)e.set(n,r);return e}function rn(t){const e=typeof t.body=="function"?t.body():t.body;if(Jt(e))throw new Error("Node streams are not supported in browser environment.");return ze(e)?Ie(e,t.onUploadProgress):e}function Ie(t,e){let n=0;if(on(t))return t.pipeThrough(new TransformStream({transform(r,i){if(r===null){i.terminate();return}i.enqueue(r),n+=r.length,e&&e({loadedBytes:n})}}));{const r=t.getReader();return new ReadableStream({async pull(i){var s;const{done:o,value:a}=await r.read();if(o||!a){i.close(),r.releaseLock();return}n+=(s=a==null?void 0:a.length)!==null&&s!==void 0?s:0,i.enqueue(a),e&&e({loadedBytes:n})}})}}function sn(){return new Gt}function on(t){return t.pipeThrough!==void 0&&self.TransformStream!==void 0}function an(){return sn()}function ln(){return Be()}class cn{constructor(e){var n,r,i,s,o,a,c;this.url=e.url,this.body=e.body,this.headers=(n=e.headers)!==null&&n!==void 0?n:_e(),this.method=(r=e.method)!==null&&r!==void 0?r:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(s=e.disableKeepAlive)!==null&&s!==void 0?s:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(o=e.withCredentials)!==null&&o!==void 0?o:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||ln(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}}function un(t){return new cn(t)}const dn={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function fn(t,e,n){async function r(){if(Date.now()<n)try{return await t()}catch{return null}else{const s=await t();if(s===null)throw new Error("Failed to refresh access token.");return s}}let i=await r();for(;i===null;)await De(e),i=await r();return i}function mn(t,e){let n=null,r=null,i;const s=Object.assign(Object.assign({},dn),e),o={get isRefreshing(){return n!==null},get shouldRefresh(){var c;return!o.isRefreshing&&((c=r==null?void 0:r.expiresOnTimestamp)!==null&&c!==void 0?c:0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return r===null||r.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function a(c,l){var u;return o.isRefreshing||(n=fn(()=>t.getToken(c,l),s.retryIntervalInMs,(u=r==null?void 0:r.expiresOnTimestamp)!==null&&u!==void 0?u:Date.now()).then(f=>(n=null,r=f,i=l.tenantId,r)).catch(f=>{throw n=null,r=null,i=void 0,f})),n}return async(c,l)=>i!==l.tenantId||Boolean(l.claims)||o.mustRefresh?a(c,l):(o.shouldRefresh&&a(c,l),r)}const hn="bearerTokenAuthenticationPolicy";async function yn(t){const{scopes:e,getAccessToken:n,request:r}=t,i={abortSignal:r.abortSignal,tracingOptions:r.tracingOptions},s=await n(e,i);s&&t.request.headers.set("Authorization",`Bearer ${s.token}`)}function pn(t){const e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function gn(t){var e;const{credential:n,scopes:r,challengeCallbacks:i}=t,s=t.logger||O,o=Object.assign({authorizeRequest:(e=i==null?void 0:i.authorizeRequest)!==null&&e!==void 0?e:yn,authorizeRequestOnChallenge:i==null?void 0:i.authorizeRequestOnChallenge},i),a=n?mn(n):()=>Promise.resolve(null);return{name:hn,async sendRequest(c,l){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await o.authorizeRequest({scopes:Array.isArray(r)?r:[r],request:c,getAccessToken:a,logger:s});let u,d;try{u=await l(c)}catch(f){d=f,u=f.response}if(o.authorizeRequestOnChallenge&&(u==null?void 0:u.status)===401&&pn(u)&&await o.authorizeRequestOnChallenge({scopes:Array.isArray(r)?r:[r],request:c,response:u,getAccessToken:a,logger:s}))return l(c);if(d)throw d;return u}}}function Ue(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function Le(t){const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}function Er(t){return atob(t)}const v="$",H="_";function wn(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||(e==null?void 0:e.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))!==null||t===void 0||t===null)}const bn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Pn(t){return bn.test(t)}const vn=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function xn(t){return vn.test(t)}function Sn(t){const e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}function ye(t,e){var n,r;const i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});const s=e&&e.bodyMapper,o=Boolean(s==null?void 0:s.nullable),a=s==null?void 0:s.type.name;if(a==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});const c=a==="Composite"&&s.type.modelProperties||{},l=Object.keys(c).some(u=>c[u].serializedName==="");if(a==="Sequence"||l){const u=(n=t.parsedBody)!==null&&n!==void 0?n:[];for(const d of Object.keys(c))c[d].serializedName&&(u[d]=(r=t.parsedBody)===null||r===void 0?void 0:r[d]);if(i)for(const d of Object.keys(i))u[d]=i[d];return o&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(c).length===0?null:u}return Sn({body:t.parsedBody,headers:i,hasNullableType:o,shouldWrapBody:wn(t.parsedBody,a)})}class Rn{constructor(e={},n=!1){this.modelMappers=e,this.isXML=n}validateConstraints(e,n,r){const i=(s,o)=>{throw new Error(`"${r}" with value "${n}" should satisfy the constraint "${s}": ${o}.`)};if(e.constraints&&n!==void 0&&n!==null){const{ExclusiveMaximum:s,ExclusiveMinimum:o,InclusiveMaximum:a,InclusiveMinimum:c,MaxItems:l,MaxLength:u,MinItems:d,MinLength:f,MultipleOf:y,Pattern:m,UniqueItems:h}=e.constraints;if(s!==void 0&&n>=s&&i("ExclusiveMaximum",s),o!==void 0&&n<=o&&i("ExclusiveMinimum",o),a!==void 0&&n>a&&i("InclusiveMaximum",a),c!==void 0&&n<c&&i("InclusiveMinimum",c),l!==void 0&&n.length>l&&i("MaxItems",l),u!==void 0&&n.length>u&&i("MaxLength",u),d!==void 0&&n.length<d&&i("MinItems",d),f!==void 0&&n.length<f&&i("MinLength",f),y!==void 0&&n%y!==0&&i("MultipleOf",y),m){const p=typeof m=="string"?new RegExp(m):m;(typeof n!="string"||n.match(p)===null)&&i("Pattern",m)}h&&n.some((p,b,g)=>g.indexOf(p)!==b)&&i("UniqueItems",h)}}serialize(e,n,r,i={xml:{}}){var s,o,a;const c={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:H}};let l={};const u=e.type.name;r||(r=e.serializedName),u.match(/^Sequence$/i)!==null&&(l=[]),e.isConstant&&(n=e.defaultValue);const{required:d,nullable:f}=e;if(d&&f&&n===void 0)throw new Error(`${r} cannot be undefined.`);if(d&&!f&&n==null)throw new Error(`${r} cannot be null or undefined.`);if(!d&&f===!1&&n===null)throw new Error(`${r} cannot be null.`);return n==null||u.match(/^any$/i)!==null?l=n:u.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?l=$n(u,r,n):u.match(/^Enum$/i)!==null?l=Nn(r,e.type.allowedValues,n):u.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?l=_n(u,n,r):u.match(/^ByteArray$/i)!==null?l=Dn(r,n):u.match(/^Base64Url$/i)!==null?l=Mn(r,n):u.match(/^Sequence$/i)!==null?l=zn(this,e,n,r,Boolean(this.isXML),c):u.match(/^Dictionary$/i)!==null?l=In(this,e,n,r,Boolean(this.isXML),c):u.match(/^Composite$/i)!==null&&(l=Ln(this,e,n,r,Boolean(this.isXML),c)),l}deserialize(e,n,r,i={xml:{}}){var s,o,a;const c={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:H}};if(n==null)return this.isXML&&e.type.name==="Sequence"&&!e.xmlIsWrapped&&(n=[]),e.defaultValue!==void 0&&(n=e.defaultValue),n;let l;const u=e.type.name;if(r||(r=e.serializedName),u.match(/^Composite$/i)!==null)l=qn(this,e,n,r,c);else{if(this.isXML){const d=c.xml.xmlCharKey;n[v]!==void 0&&n[d]!==void 0&&(n=n[d])}u.match(/^Number$/i)!==null?(l=parseFloat(n),isNaN(l)&&(l=n)):u.match(/^Boolean$/i)!==null?n==="true"?l=!0:n==="false"?l=!1:l=n:u.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?l=n:u.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?l=new Date(n):u.match(/^UnixTime$/i)!==null?l=Tn(n):u.match(/^ByteArray$/i)!==null?l=Le(n):u.match(/^Base64Url$/i)!==null?l=An(n):u.match(/^Sequence$/i)!==null?l=Hn(this,e,n,r,c):u.match(/^Dictionary$/i)!==null&&(l=Vn(this,e,n,r,c))}return e.isConstant&&(l=e.defaultValue),l}}function Ar(t={},e=!1){return new Rn(t,e)}function Cn(t,e){let n=t.length;for(;n-1>=0&&t[n-1]===e;)--n;return t.substr(0,n)}function En(t){if(!t)return;if(!(t instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const e=Ue(t);return Cn(e,"=").replace(/\+/g,"-").replace(/\//g,"_")}function An(t){if(!!t){if(t&&typeof t.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return t=t.replace(/-/g,"+").replace(/_/g,"/"),Le(t)}}function ee(t){const e=[];let n="";if(t){const r=t.split(".");for(const i of r)i.charAt(i.length-1)==="\\"?n+=i.substr(0,i.length-1)+".":(n+=i,e.push(n),n="")}return e}function On(t){if(!!t)return typeof t.valueOf()=="string"&&(t=new Date(t)),Math.floor(t.getTime()/1e3)}function Tn(t){if(!!t)return new Date(t*1e3)}function $n(t,e,n){if(n!=null){if(t.match(/^Number$/i)!==null){if(typeof n!="number")throw new Error(`${e} with value ${n} must be of type number.`)}else if(t.match(/^String$/i)!==null){if(typeof n.valueOf()!="string")throw new Error(`${e} with value "${n}" must be of type string.`)}else if(t.match(/^Uuid$/i)!==null){if(!(typeof n.valueOf()=="string"&&xn(n)))throw new Error(`${e} with value "${n}" must be of type string and a valid uuid.`)}else if(t.match(/^Boolean$/i)!==null){if(typeof n!="boolean")throw new Error(`${e} with value ${n} must be of type boolean.`)}else if(t.match(/^Stream$/i)!==null&&typeof n!=="string"&&typeof n.pipe!="function"&&!(n instanceof ArrayBuffer)&&!ArrayBuffer.isView(n)&&!((typeof Blob=="function"||typeof Blob=="object")&&n instanceof Blob))throw new Error(`${e} must be a string, Blob, ArrayBuffer, ArrayBufferView, or NodeJS.ReadableStream.`)}return n}function Nn(t,e,n){if(!e)throw new Error(`Please provide a set of allowedValues to validate ${t} as an Enum Type.`);if(!e.some(i=>typeof i.valueOf()=="string"?i.toLowerCase()===n.toLowerCase():i===n))throw new Error(`${n} is not a valid value for ${t}. The valid values are: ${JSON.stringify(e)}.`);return n}function Dn(t,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${t} must be of type Uint8Array.`);e=Ue(e)}return e}function Mn(t,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${t} must be of type Uint8Array.`);e=En(e)}return e}function _n(t,e,n){if(e!=null){if(t.match(/^Date$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${n} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString().substring(0,10):new Date(e).toISOString().substring(0,10)}else if(t.match(/^DateTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${n} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString():new Date(e).toISOString()}else if(t.match(/^DateTimeRfc1123$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${n} must be an instanceof Date or a string in RFC-1123 format.`);e=e instanceof Date?e.toUTCString():new Date(e).toUTCString()}else if(t.match(/^UnixTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${n} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);e=On(e)}else if(t.match(/^TimeSpan$/i)!==null&&!Pn(e))throw new Error(`${n} must be a string in ISO 8601 format. Instead was "${e}".`)}return e}function zn(t,e,n,r,i,s){var o;if(!Array.isArray(n))throw new Error(`${r} must be of type Array.`);let a=e.type.element;if(!a||typeof a!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${r}.`);a.type.name==="Composite"&&a.type.className&&(a=(o=t.modelMappers[a.type.className])!==null&&o!==void 0?o:a);const c=[];for(let l=0;l<n.length;l++){const u=t.serialize(a,n[l],r,s);if(i&&a.xmlNamespace){const d=a.xmlNamespacePrefix?`xmlns:${a.xmlNamespacePrefix}`:"xmlns";a.type.name==="Composite"?(c[l]=Object.assign({},u),c[l][v]={[d]:a.xmlNamespace}):(c[l]={},c[l][s.xml.xmlCharKey]=u,c[l][v]={[d]:a.xmlNamespace})}else c[l]=u}return c}function In(t,e,n,r,i,s){if(typeof n!="object")throw new Error(`${r} must be of type object.`);const o=e.type.value;if(!o||typeof o!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${r}.`);const a={};for(const c of Object.keys(n)){const l=t.serialize(o,n[c],r,s);a[c]=Ve(o,l,i,s)}if(i&&e.xmlNamespace){const c=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",l=a;return l[v]={[c]:e.xmlNamespace},l}return a}function Un(t,e,n){const r=e.type.additionalProperties;if(!r&&e.type.className){const i=ke(t,e,n);return i==null?void 0:i.type.additionalProperties}return r}function ke(t,e,n){const r=e.type.className;if(!r)throw new Error(`Class name for model "${n}" is not provided in the mapper "${JSON.stringify(e,void 0,2)}".`);return t.modelMappers[r]}function qe(t,e,n){let r=e.type.modelProperties;if(!r){const i=ke(t,e,n);if(!i)throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(r=i==null?void 0:i.type.modelProperties,!r)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(i)}" of type "${e.type.className}" for object "${n}".`)}return r}function Ln(t,e,n,r,i,s){if(B(t,e)&&(e=He(t,e,n,"clientName")),n!=null){const o={},a=qe(t,e,r);for(const l of Object.keys(a)){const u=a[l];if(u.readOnly)continue;let d,f=o;if(t.isXML)u.xmlIsWrapped?d=u.xmlName:d=u.xmlElementName||u.xmlName;else{const y=ee(u.serializedName);d=y.pop();for(const m of y){const h=f[m];h==null&&(n[l]!==void 0&&n[l]!==null||u.defaultValue!==void 0)&&(f[m]={}),f=f[m]}}if(f!=null){if(i&&e.xmlNamespace){const b=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns";f[v]=Object.assign(Object.assign({},f[v]),{[b]:e.xmlNamespace})}const y=u.serializedName!==""?r+"."+u.serializedName:r;let m=n[l];const h=B(t,e);h&&h.clientName===l&&m==null&&(m=e.serializedName);const p=t.serialize(u,m,y,s);if(p!==void 0&&d!==void 0&&d!==null){const b=Ve(u,p,i,s);i&&u.xmlIsAttribute?(f[v]=f[v]||{},f[v][d]=p):i&&u.xmlIsWrapped?f[d]={[u.xmlElementName]:b}:f[d]=b}}}const c=Un(t,e,r);if(c){const l=Object.keys(a);for(const u in n)l.every(f=>f!==u)&&(o[u]=t.serialize(c,n[u],r+'["'+u+'"]',s))}return o}return n}function Ve(t,e,n,r){if(!n||!t.xmlNamespace)return e;const s={[t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns"]:t.xmlNamespace};if(["Composite"].includes(t.type.name)){if(e[v])return e;{const a=Object.assign({},e);return a[v]=s,a}}const o={};return o[r.xml.xmlCharKey]=e,o[v]=s,o}function kn(t,e){return[v,e.xml.xmlCharKey].includes(t)}function qn(t,e,n,r,i){var s;B(t,e)&&(e=He(t,e,n,"serializedName"));const o=qe(t,e,r);let a={};const c=[];for(const u of Object.keys(o)){const d=o[u],f=ee(o[u].serializedName);c.push(f[0]);const{serializedName:y,xmlName:m,xmlElementName:h}=d;let p=r;y!==""&&y!==void 0&&(p=r+"."+y);const b=d.headerCollectionPrefix;if(b){const g={};for(const w of Object.keys(n))w.startsWith(b)&&(g[w.substring(b.length)]=t.deserialize(d.type.value,n[w],p,i)),c.push(w);a[u]=g}else if(t.isXML)if(d.xmlIsAttribute&&n[v])a[u]=t.deserialize(d,n[v][m],p,i);else{const g=h||m||y;if(d.xmlIsWrapped){const w=n[m],P=(s=w==null?void 0:w[h])!==null&&s!==void 0?s:[];a[u]=t.deserialize(d,P,p,i)}else{const w=n[g];a[u]=t.deserialize(d,w,p,i)}}else{let g,w=n;for(const S of f){if(!w)break;w=w[S]}g=w;const P=e.type.polymorphicDiscriminator;P&&u===P.clientName&&g==null&&(g=e.serializedName);let C;if(Array.isArray(n[u])&&o[u].serializedName===""){g=n[u];const S=t.deserialize(d,g,p,i);for(const[T,_]of Object.entries(a))Object.prototype.hasOwnProperty.call(S,T)||(S[T]=_);a=S}else(g!==void 0||d.defaultValue!==void 0)&&(C=t.deserialize(d,g,p,i),a[u]=C)}}const l=e.type.additionalProperties;if(l){const u=d=>{for(const f in o)if(ee(o[f].serializedName)[0]===d)return!1;return!0};for(const d in n)u(d)&&(a[d]=t.deserialize(l,n[d],r+'["'+d+'"]',i))}else if(n)for(const u of Object.keys(n))a[u]===void 0&&!c.includes(u)&&!kn(u,i)&&(a[u]=n[u]);return a}function Vn(t,e,n,r,i){const s=e.type.value;if(!s||typeof s!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${r}`);if(n){const o={};for(const a of Object.keys(n))o[a]=t.deserialize(s,n[a],r,i);return o}return n}function Hn(t,e,n,r,i){var s;let o=e.type.element;if(!o||typeof o!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${r}`);if(n){Array.isArray(n)||(n=[n]),o.type.name==="Composite"&&o.type.className&&(o=(s=t.modelMappers[o.type.className])!==null&&s!==void 0?s:o);const a=[];for(let c=0;c<n.length;c++)a[c]=t.deserialize(o,n[c],`${r}[${c}]`,i);return a}return n}function Bn(t,e,n){const r=[n];for(;r.length;){const i=r.shift(),s=e===i?e:i+"."+e;if(Object.prototype.hasOwnProperty.call(t,s))return t[s];for(const[o,a]of Object.entries(t))o.startsWith(i+".")&&a.type.uberParent===i&&a.type.className&&r.push(a.type.className)}}function He(t,e,n,r){var i;const s=B(t,e);if(s){let o=s[r];if(o){r==="serializedName"&&(o=o.replace(/\\/gi,""));const a=n[o],c=(i=e.type.uberParent)!==null&&i!==void 0?i:e.type.className;if(typeof a=="string"&&c){const l=Bn(t.modelMappers.discriminators,a,c);l&&(e=l)}}}return e}function B(t,e){return e.type.polymorphicDiscriminator||pe(t,e.type.uberParent)||pe(t,e.type.className)}function pe(t,e){return e&&t.modelMappers[e]&&t.modelMappers[e].type.polymorphicDiscriminator}const E={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};function A(t,e,n){let r=e.parameterPath;const i=e.mapper;let s;if(typeof r=="string"&&(r=[r]),Array.isArray(r)){if(r.length>0)if(i.isConstant)s=i.defaultValue;else{let o=ge(t,r);!o.propertyFound&&n&&(o=ge(n,r));let a=!1;o.propertyFound||(a=i.required||r[0]==="options"&&r.length===2),s=a?i.defaultValue:o.propertyValue}}else{i.required&&(s={});for(const o in r){const a=i.type.modelProperties[o],c=r[o],l=A(t,{parameterPath:c,mapper:a},n);l!==void 0&&(s||(s={}),s[o]=l)}}return s}function ge(t,e){const n={propertyFound:!1};let r=0;for(;r<e.length;++r){const i=e[r];if(t&&i in t)t=t[i];else break}return r===e.length&&(n.propertyValue=t,n.propertyFound=!0),n}const we=new WeakMap;function M(t){let e=we.get(t);return e||(e={},we.set(t,e)),e}const Fn=["application/json","text/json"],Kn=["application/xml","application/atom+xml"],Wn="deserializationPolicy";function jn(t={}){var e,n,r,i,s,o,a;const c=(n=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&n!==void 0?n:Fn,l=(i=(r=t.expectedContentTypes)===null||r===void 0?void 0:r.xml)!==null&&i!==void 0?i:Kn,u=t.parseXML,d=t.serializerOptions,f={xml:{rootName:(s=d==null?void 0:d.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=d==null?void 0:d.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=d==null?void 0:d.xml.xmlCharKey)!==null&&a!==void 0?a:H}};return{name:Wn,async sendRequest(y,m){const h=await m(y);return Gn(c,l,h,f,u)}}}function Xn(t){let e;const n=t.request,r=M(n),i=r==null?void 0:r.operationSpec;return i&&(r!=null&&r.operationResponseGetter?e=r==null?void 0:r.operationResponseGetter(i,t):e=i.responses[t.status]),e}function Jn(t){const e=t.request,n=M(e),r=n==null?void 0:n.shouldDeserialize;let i;return r===void 0?i=!0:typeof r=="boolean"?i=r:i=r(t),i}async function Gn(t,e,n,r,i){const s=await Zn(t,e,n,r,i);if(!Jn(s))return s;const o=M(s.request),a=o==null?void 0:o.operationSpec;if(!a||!a.responses)return s;const c=Xn(s),{error:l,shouldReturnResponse:u}=Yn(s,a,c);if(l)throw l;if(u)return s;if(c){if(c.bodyMapper){let d=s.parsedBody;a.isXML&&c.bodyMapper.type.name===E.Sequence&&(d=typeof d=="object"?d[c.bodyMapper.xmlElementName]:[]);try{s.parsedBody=a.serializer.deserialize(c.bodyMapper,d,"operationRes.parsedBody")}catch(f){throw new x(`Error ${f} occurred in deserializing the responseBody - ${s.bodyAsText}`,{statusCode:s.status,request:s.request,response:s})}}else a.httpMethod==="HEAD"&&(s.parsedBody=n.status>=200&&n.status<300);c.headersMapper&&(s.parsedHeaders=a.serializer.deserialize(c.headersMapper,s.headers.toJSON(),"operationRes.parsedHeaders"))}return s}function Qn(t){const e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}function Yn(t,e,n){var r;const i=200<=t.status&&t.status<300;if(Qn(e)?i:!!n)if(n){if(!n.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};const o=n!=null?n:e.responses.default,a=!((r=t.request.streamResponseStatusCodes)===null||r===void 0)&&r.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,c=new x(a,{statusCode:t.status,request:t.request,response:t});if(!o)throw c;const l=o.bodyMapper,u=o.headersMapper;try{if(t.parsedBody){const d=t.parsedBody;let f;if(l){let m=d;if(e.isXML&&l.type.name===E.Sequence){m=[];const h=l.xmlElementName;typeof d=="object"&&h&&(m=d[h])}f=e.serializer.deserialize(l,m,"error.response.parsedBody")}const y=d.error||f||d;c.code=y.code,y.message&&(c.message=y.message),l&&(c.response.parsedBody=f)}t.headers&&u&&(c.response.parsedHeaders=e.serializer.deserialize(u,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(d){c.message=`Error "${d.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:c,shouldReturnResponse:!1}}async function Zn(t,e,n,r,i){var s;if(!(!((s=n.request.streamResponseStatusCodes)===null||s===void 0)&&s.has(n.status))&&n.bodyAsText){const o=n.bodyAsText,a=n.headers.get("Content-Type")||"",c=a?a.split(";").map(l=>l.toLowerCase()):[];try{if(c.length===0||c.some(l=>t.indexOf(l)!==-1))return n.parsedBody=JSON.parse(o),n;if(c.some(l=>e.indexOf(l)!==-1)){if(!i)throw new Error("Parsing XML not supported.");const l=await i(o,r.xml);return n.parsedBody=l,n}}catch(l){const u=`Error "${l}" occurred while parsing the response body - ${n.bodyAsText}.`,d=l.code||x.PARSE_ERROR;throw new x(u,{code:d,statusCode:n.status,request:n.request,response:n})}}return n}function er(t){const e=new Set;for(const n in t.responses){const r=t.responses[n];r.bodyMapper&&r.bodyMapper.type.name===E.Stream&&e.add(Number(n))}return e}function R(t){const{parameterPath:e,mapper:n}=t;let r;return typeof e=="string"?r=e:Array.isArray(e)?r=e.join("."):r=n.serializedName,r}const tr="serializationPolicy";function nr(t={}){const e=t.stringifyXML;return{name:tr,async sendRequest(n,r){const i=M(n),s=i==null?void 0:i.operationSpec,o=i==null?void 0:i.operationArguments;return s&&o&&(rr(n,o,s),ir(n,o,s,e)),r(n)}}}function rr(t,e,n){var r,i;if(n.headerParameters)for(const o of n.headerParameters){let a=A(e,o);if(a!=null||o.mapper.required){a=n.serializer.serialize(o.mapper,a,R(o));const c=o.mapper.headerCollectionPrefix;if(c)for(const l of Object.keys(a))t.headers.set(c+l,a[l]);else t.headers.set(o.mapper.serializedName||R(o),a)}}const s=(i=(r=e.options)===null||r===void 0?void 0:r.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(s)for(const o of Object.keys(s))t.headers.set(o,s[o])}function ir(t,e,n,r=function(){throw new Error("XML serialization unsupported!")}){var i,s,o,a,c;const l=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,u={xml:{rootName:(s=l==null?void 0:l.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=l==null?void 0:l.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=l==null?void 0:l.xml.xmlCharKey)!==null&&a!==void 0?a:H}},d=u.xml.xmlCharKey;if(n.requestBody&&n.requestBody.mapper){t.body=A(e,n.requestBody);const f=n.requestBody.mapper,{required:y,serializedName:m,xmlName:h,xmlElementName:p,xmlNamespace:b,xmlNamespacePrefix:g,nullable:w}=f,P=f.type.name;try{if(t.body!==void 0&&t.body!==null||w&&t.body===null||y){const C=R(n.requestBody);t.body=n.serializer.serialize(f,t.body,C,u);const S=P===E.Stream;if(n.isXML){const T=g?`xmlns:${g}`:"xmlns",_=sr(b,T,P,t.body,u);P===E.Sequence?t.body=r(or(_,p||h||m,T,b),{rootName:h||m,xmlCharKey:d}):S||(t.body=r(_,{rootName:h||m,xmlCharKey:d}))}else{if(P===E.String&&(((c=n.contentType)===null||c===void 0?void 0:c.match("text/plain"))||n.mediaType==="text"))return;S||(t.body=JSON.stringify(t.body))}}}catch(C){throw new Error(`Error "${C.message}" occurred in serializing the payload - ${JSON.stringify(m,void 0,"  ")}.`)}}else if(n.formDataParameters&&n.formDataParameters.length>0){t.formData={};for(const f of n.formDataParameters){const y=A(e,f);if(y!=null){const m=f.mapper.serializedName||R(f);t.formData[m]=n.serializer.serialize(f.mapper,y,R(f),u)}}}}function sr(t,e,n,r,i){if(t&&!["Composite","Sequence","Dictionary"].includes(n)){const s={};return s[i.xml.xmlCharKey]=r,s[v]={[e]:t},s}return r}function or(t,e,n,r){if(Array.isArray(t)||(t=[t]),!n||!r)return{[e]:t};const i={[e]:t};return i[v]={[n]:r},i}function ar(t={}){const e=Wt(t!=null?t:{});return t.credentialOptions&&e.addPolicy(gn({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(nr(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(jn(t.deserializationOptions),{phase:"Deserialize"}),e}let j;function lr(){return j||(j=an()),j}const cr={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function ur(t,e,n,r){const i=dr(e,n,r);let s=!1,o=be(t,i);if(e.path){let l=be(e.path,i);e.path==="/{nextLink}"&&l.startsWith("/")&&(l=l.substring(1)),fr(l)?(o=l,s=!0):o=mr(o,l)}const{queryParams:a,sequenceParams:c}=hr(e,n,r);return o=pr(o,a,c,s),o}function be(t,e){let n=t;for(const[r,i]of e)n=n.split(r).join(i);return n}function dr(t,e,n){var r;const i=new Map;if(!((r=t.urlParameters)===null||r===void 0)&&r.length)for(const s of t.urlParameters){let o=A(e,s,n);const a=R(s);o=t.serializer.serialize(s.mapper,o,a),s.skipEncoding||(o=encodeURIComponent(o)),i.set(`{${s.mapper.serializedName||a}}`,o)}return i}function fr(t){return t.includes("://")}function mr(t,e){if(!e)return t;const n=new URL(t);let r=n.pathname;r.endsWith("/")||(r=`${r}/`),e.startsWith("/")&&(e=e.substring(1));const i=e.indexOf("?");if(i!==-1){const s=e.substring(0,i),o=e.substring(i+1);r=r+s,o&&(n.search=n.search?`${n.search}&${o}`:o)}else r=r+e;return n.pathname=r,n.toString()}function hr(t,e,n){var r;const i=new Map,s=new Set;if(!((r=t.queryParameters)===null||r===void 0)&&r.length)for(const o of t.queryParameters){o.mapper.type.name==="Sequence"&&o.mapper.serializedName&&s.add(o.mapper.serializedName);let a=A(e,o,n);if(a!=null||o.mapper.required){a=t.serializer.serialize(o.mapper,a,R(o));const c=o.collectionFormat?cr[o.collectionFormat]:"";if(Array.isArray(a)&&(a=a.map(l=>l==null?"":l)),o.collectionFormat==="Multi"&&a.length===0)continue;Array.isArray(a)&&(o.collectionFormat==="SSV"||o.collectionFormat==="TSV")&&(a=a.join(c)),o.skipEncoding||(Array.isArray(a)?a=a.map(l=>encodeURIComponent(l)):a=encodeURIComponent(a)),Array.isArray(a)&&(o.collectionFormat==="CSV"||o.collectionFormat==="Pipes")&&(a=a.join(c)),i.set(o.mapper.serializedName||R(o),a)}}return{queryParams:i,sequenceParams:s}}function yr(t){const e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);const n=t.split("&");for(const r of n){const[i,s]=r.split("=",2),o=e.get(i);o?Array.isArray(o)?o.push(s):e.set(i,[o,s]):e.set(i,s)}return e}function pr(t,e,n,r=!1){if(e.size===0)return t;const i=new URL(t),s=yr(i.search);for(const[a,c]of e){const l=s.get(a);if(Array.isArray(l))if(Array.isArray(c)){l.push(...c);const u=new Set(l);s.set(a,Array.from(u))}else l.push(c);else l?(Array.isArray(c)?c.unshift(l):n.has(a)&&s.set(a,[l,c]),r||s.set(a,c)):s.set(a,c)}const o=[];for(const[a,c]of s)if(typeof c=="string")o.push(`${a}=${c}`);else if(Array.isArray(c))for(const l of c)o.push(`${a}=${l}`);else o.push(`${a}=${c}`);return i.search=o.length?`?${o.join("&")}`:"",i.toString()}const gr=ie("core-client");class Or{constructor(e={}){var n,r;if(this._requestContentType=e.requestContentType,this._endpoint=(n=e.endpoint)!==null&&n!==void 0?n:e.baseUri,e.baseUri&&gr.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||lr(),this.pipeline=e.pipeline||wr(e),!((r=e.additionalPolicies)===null||r===void 0)&&r.length)for(const{policy:i,position:s}of e.additionalPolicies){const o=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:o})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,n){const r=n.baseUrl||this._endpoint;if(!r)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const i=ur(r,n,e,this),s=un({url:i});s.method=n.httpMethod;const o=M(s);o.operationSpec=n,o.operationArguments=e;const a=n.contentType||this._requestContentType;a&&n.requestBody&&s.headers.set("Content-Type",a);const c=e.options;if(c){const l=c.requestOptions;l&&(l.timeout&&(s.timeout=l.timeout),l.onUploadProgress&&(s.onUploadProgress=l.onUploadProgress),l.onDownloadProgress&&(s.onDownloadProgress=l.onDownloadProgress),l.shouldDeserialize!==void 0&&(o.shouldDeserialize=l.shouldDeserialize),l.allowInsecureConnection&&(s.allowInsecureConnection=!0)),c.abortSignal&&(s.abortSignal=c.abortSignal),c.tracingOptions&&(s.tracingOptions=c.tracingOptions)}this._allowInsecureConnection&&(s.allowInsecureConnection=!0),s.streamResponseStatusCodes===void 0&&(s.streamResponseStatusCodes=er(n));try{const l=await this.sendRequest(s),u=ye(l,n.responses[l.status]);return c!=null&&c.onResponse&&c.onResponse(l,u),u}catch(l){if(typeof l=="object"&&(l==null?void 0:l.response)){const u=l.response,d=ye(u,n.responses[l.statusCode]||n.responses.default);l.details=d,c!=null&&c.onResponse&&c.onResponse(u,d,l)}throw l}}}function wr(t){const e=br(t),n=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return ar(Object.assign(Object.assign({},t),{credentialOptions:n}))}function br(t){if(t.credentialScopes){const e=t.credentialScopes;return Array.isArray(e)?e.map(n=>new URL(n).toString()):new URL(e).toString()}if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}export{vr as A,x as R,Or as S,xr as _,ie as a,Sr as b,Ar as c,Cr as d,k as e,Rr as f,gn as g,Er as h,hn as i,gr as l};
