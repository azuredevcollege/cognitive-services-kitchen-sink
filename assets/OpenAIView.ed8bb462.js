import{d as f,r as g,o as r,c as l,a as t,w as v,v as _,u as k,i as b,F as p,h as x,t as I}from"./index.e0d5fc43.js";import{u as w}from"./settings.fe6fa44e.js";import{a as d}from"./index.c24e3fd4.js";const B=t("div",null,[t("textarea",{class:"textarea textarea-bordered w-1/2 h-24 max-h-48",placeholder:"Enter something here that can be summarized, given as an SQL query ...",id:"inputtext"})],-1),S={class:"form-control space-y-2"},E={class:"input-group"},A=t("option",{disabled:"",selected:""},"Choose a model",-1),C=t("div",null,[t("textarea",{placeholder:"Result",class:"textarea textarea-bordered w-1/2 h-24",id:"result",rows:"8"})],-1),V=f({__name:"OpenAIView",setup(N){const a=w();var c="",s="";const i=g([]);var u="";function m(){d({method:"get",url:a.openaiendpoint+"openai/deployments?api-version=2022-12-01",headers:{"Content-Type":"application/json","api-key":a.openaikey}}).then(function(e){i.length=0;for(let n=0;n<e.data.data.length;n++)u=JSON.stringify(e.data.data[n].id).slice(1,-1),d({method:"get",url:a.openaiendpoint+"openai/models/"+u+"?api-version=2022-12-01",headers:{"api-key":a.openaikey}}).then(function(o){o.data.capabilities.embeddings==!1&&i.push(JSON.stringify(e.data.data[n].id).slice(1,-1))})}).catch(function(e){e.response.status===404?document.getElementById("result").value="An error has occurred. You might need to enter the API key and endpoint of your service under Settings.":document.getElementById("result").value="An unknown error has occurred. If you are interested in the details have a look at the developer console of your browser."})}function h(){c=document.getElementById("inputtext").value,y()}function y(){d({method:"post",url:a.openaiendpoint+"openai/deployments/"+s+"/completions?api-version=2022-12-01",maxBodyLength:1/0,headers:{"Content-Type":"application/json","api-key":a.openaikey},data:JSON.stringify({prompt:c,max_tokens:100,temperature:.7,frequency_penalty:0,presence_penalty:0,top_p:1,best_of:1,stop:null})}).then(function(e){console.log(JSON.stringify(e.data)),document.getElementById("result").value=e.data.choices[0].text}).catch(function(e){e.response.status===404?document.getElementById("result").value="An error has occurred. You might need to chose a model.":document.getElementById("result").value="An unknown error has occurred. If you are interested in the details have a look at the developer console of your browser."})}return(e,n)=>(r(),l(p,null,[B,t("div",S,[t("div",E,[v(t("select",{class:"select select-bordered","onUpdate:modelValue":n[0]||(n[0]=o=>b(s)?s.value=o:s=o),id:"deployments"},[A,(r(!0),l(p,null,x(i,o=>(r(),l("option",{key:o},I(o),1))),128))],512),[[_,k(s)]]),t("button",{class:"btn btn-active",onClick:h},"apply"),t("button",{class:"btn btn-info",onClick:m},"get models")]),C])],64))}});export{V as default};
